<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>å…’å°‘æ”¿ç­–äº’å‹•é¸æ“‡</title>
<style>
body {
    background-color: black;
    color: #00FF00;
    font-family: monospace;
    padding: 20px;
}
.title {
    font-size: 1.5em;
    margin-bottom: 20px;
    color: #FF5555;
}
#terminal {
    margin-top: 20px;
    white-space: pre;
}
select, button {
    font-family: monospace;
    font-size: 1em;
    background-color: black;
    color: #00FF00;
    border: 1px solid #00FF00;
    padding: 5px 10px;
    margin-top: 10px;
}
button:hover {
    color: #00FFFF;
    border-color: #00FFFF;
}
.ansi-green { color: #00FF00; }
.ansi-cyan { color: #00FFFF; }
.ansi-red { color: #FF5555; }
</style>
</head>
<body>
<div class="title">ğŸ’» å…’å°‘æ”¿ç­–äº’å‹•æ¨¡æ“¬ - Select a Policy / é¸æ“‡æ”¿ç­–</div>

<select id="policySelect">
    <option value="">-- è«‹é¸æ“‡æ”¿ç­– --</option>
</select>
<br>
<button id="executeBtn">åŸ·è¡Œæ”¿ç­– / Execute Policy</button>

<div id="terminal"></div>

<script>
// æ”¿ç­–è³‡æ–™
const policies = [
    {id:1, name:"å…¨æ°‘æ°£å€™è¡Œå‹•æ—¥", log:"system executes: nationwide_climate_action protocol...", category:"env"},
    {id:2, name:"è¸è’‚ä¸è½åœ°", log:"system executes: cigarette_litter_reduction module...", category:"env"},
    {id:3, name:"ç¶ è‰²é€šå‹¤æ›´å®¹æ˜“", log:"sustainability.module: computing urban mobility impact...", category:"env"},
    {id:4, name:"ç¤¾å€å…¬åœ’ Ã— æ¨¹æ›´å¤š", log:"system deploys: urban_park_expansion...", category:"env"},
    {id:5, name:"æ¸›å¡‘æ—¥è¡Œå‹•ï¼", log:"system executes: plastic_reduction_day...", category:"env"},
    {id:6, name:"è¸å“æ¸›å®³è¨­è¨ˆ", log:"system enforces: biodegradable_filter regulation...", category:"env"},
    {id:7, name:"æ™ºæ…§3Cè¨­è¨ˆ", log:"system executes: smart_3C_device regulation...", category:"digital"},
    {id:8, name:"å¥åº·ä½¿ç”¨3Cæ•™è‚²", log:"system deploys: 3C_health_education...", category:"digital"},
    {id:9, name:"æ ¡åœ’ç„¡3Cæ—¥", log:"system executes: no_3C_day...", category:"digital"},
    {id:10, name:"æ•¸ä½æ€§å‰å‰Šé›¶å®¹å¿", log:"system enforces: zero_tolerance_policy...", category:"digital"},
    {id:11, name:"åª’é«”å…±åŒå®ˆè­·", log:"system executes: media_awareness_campaign...", category:"digital"},
    {id:12, name:"å…¨æ ¡å­¸ç”Ÿæœƒè­°åˆ¶åº¦åŒ–", log:"system executes: student_council_meeting protocol...", category:"participate"}
];

// ä¾é¡åˆ¥åˆ†çµ„
const categories = {
    env: "æ°¸çºŒç’°å¢ƒ / Sustainability",
    digital: "æ•¸ä½å®‰å…¨èˆ‡å¥åº·ä½¿ç”¨ / Digital Safety & Health",
    participate: "å…’å°‘è¡¨æ„åƒèˆ‡ / Child Participation"
};

const select = document.getElementById("policySelect");

// å»ºç«‹ optgroup
for (const cat in categories){
    const group = document.createElement("optgroup");
    group.label = categories[cat];
    policies.filter(p=>p.category===cat).forEach(p=>{
        const option = document.createElement("option");
        option.value = p.id;
        option.textContent = `${p.id}. ${p.name}`;
        group.appendChild(option);
    });
    select.appendChild(group);
}

// æ‰“å­—æ©Ÿæ•ˆæœ
function typewriter(element, text, delay = 30, callback){
    let i = 0;
    function write(){
        if(i < text.length){
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(write, delay);
        } else if(callback){
            callback();
        }
    }
    write();
}

// loading bar
function showLoading(callback){
    const stages = ["[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–’â–’â–’â–’â–’] 35% æ›´æ–°ä¸­...\n",
                    "[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–’] 50% æ›´æ–°ä¸­...\n",
                    "[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’] 75% æ›´æ–°ä¸­...\n",
                    "[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100% æ›´æ–°å®Œæˆ!\n"];
    let i = 0;
    function next(){
        if(i < stages.length){
            terminal.innerHTML += stages[i];
            i++;
            setTimeout(next, 300);
        } else if(callback){
            callback();
        }
    }
    next();
}

const btn = document.getElementById("executeBtn");
const terminal = document.getElementById("terminal");

btn.onclick = ()=>{
    const selectedId = parseInt(select.value);
    if(!selectedId) return alert("è«‹å…ˆé¸æ“‡ä¸€æ¢æ”¿ç­– / Please select a policy");
    const policy = policies.find(p=>p.id===selectedId);
    select.style.display = "none";
    btn.style.display = "none";

    typewriter(terminal, "> initializing policy execution: " + policy.name + "\n", 40, ()=>{
        showLoading(()=>{
            typewriter(terminal, "\n> execution complete. redirecting...\n", 40, ()=>{
                // æ±ºå®šæ¨¡æ¿é 
                let targetPage = "participate.html";
                if(policy.category === "env") targetPage = "env.html";
                if(policy.category === "digital") targetPage = "digital.html";
                window.location.href = `${targetPage}?id=${policy.id}`;
            });
        });
    });
};
</script>
</body>
</html>

